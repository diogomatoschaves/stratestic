import numpy as np
from pandas import Timestamp

expected_optimization_results = {
    "brute_force": ({'nr_lags': 2.0}, 13.175614657220974),
    "gen_alg": ({'nr_lags': 5.0}, np.inf),
}

expected_results = [
    {
        "close_time": Timestamp("2023-09-01 14:54:59.999000+0000", tz="UTC"),
        "open": 56191.11,
        "high": 56200.0,
        "low": 56107.98,
        "close": 56145.0,
        "volume": 254.091606,
        "quote_volume": 14265787.89818125,
        "trades": 1.0,
        "taker_buy_asset_volume": 134.1124,
        "taker_buy_quote_volume": 7529521.30623853,
        "returns": 0.0,
        "returns_lag5": 0.002946423556387118,
        "returns_lag4": 0.006818529518377586,
        "returns_lag3": 0.005926179097336494,
        "returns_lag2": -0.00170962942015996,
        "returns_lag1": 0.0003967606653441501,
        "side": 1.0,
        "strategy_returns_tc": 0.0,
        "equity": 1000.0,
        "strategy_returns": 0.0,
        "accumulated_returns": 1.0,
        "accumulated_strategy_returns_tc": 1.0,
        "accumulated_strategy_returns": 1.0,
    },
    {
        "close_time": Timestamp("2023-09-01 14:59:59.999000+0000", tz="UTC"),
        "open": 56145.0,
        "high": 56211.7,
        "low": 56106.97,
        "close": 56182.11,
        "volume": 270.145731,
        "quote_volume": 15171017.18758856,
        "trades": 0.0,
        "taker_buy_asset_volume": 168.231118,
        "taker_buy_quote_volume": 9447425.0774598,
        "returns": 0.0006607487960858385,
        "returns_lag5": 0.006818529518377586,
        "returns_lag4": 0.005926179097336494,
        "returns_lag3": -0.00170962942015996,
        "returns_lag2": 0.0003967606653441501,
        "returns_lag1": -0.0008209293091875578,
        "side": 1.0,
        "strategy_returns_tc": 0.0006607487960858385,
        "equity": 1000.6609671386589,
        "strategy_returns": 0.0006607487960858385,
        "accumulated_returns": 1.0006609671386588,
        "accumulated_strategy_returns_tc": 1.0006609671386588,
        "accumulated_strategy_returns": 1.0006609671386588,
    },
    {
        "close_time": Timestamp("2023-09-01 15:04:59.999000+0000", tz="UTC"),
        "open": 56182.12,
        "high": 56299.78,
        "low": 56172.09,
        "close": 56289.89,
        "volume": 298.797415,
        "quote_volume": 16804824.55255641,
        "trades": 1.0,
        "taker_buy_asset_volume": 139.83665,
        "taker_buy_quote_volume": 7864202.02549528,
        "returns": 0.0019165664875115606,
        "returns_lag5": 0.005926179097336494,
        "returns_lag4": -0.00170962942015996,
        "returns_lag3": 0.0003967606653441501,
        "returns_lag2": -0.0008209293091875578,
        "returns_lag1": 0.0006607487960858385,
        "side": 0.0,
        "strategy_returns_tc": 0.0019165664875115606,
        "equity": 1002.5806394157984,
        "strategy_returns": 0.0019165664875115606,
        "accumulated_returns": 1.0025806394157983,
        "accumulated_strategy_returns_tc": 1.0025806394157983,
        "accumulated_strategy_returns": 1.0025806394157983,
    },
]
